format js
                .:;.                                        
                :11i,                                       
                i111i,                                      
               .i1111i,                                     
               :111111i:    ,;;,                            
               ;1111111i:  ,i11i,          ..               
              .i11111111i;:111111,      .,:;;               
              ,1111111111111111111:   .,:;ii;.              
              ;111111111ttttt111111:.,:;iiiii:              
             .i11111111ttttttt11111i;;iiiiiii;              
             ,11111111ttttttttt11iiiiiiiiiiiii.             
            .;1111111tttttttttt1iiiiiiiiiiiiii,             
            .i111111ttttttttt1iiiiiiiiiiiiiiii;.            
            ,111111tttttttt1iiiiiiiiiiiiiiiiiii.            
           .:11111ttttttt1iiiiiiiiiiiiiiiiiiiii,            
           .i1111tttttt1iiiiiiiiiiiiiiiiiiiiiii:.           
           ,1111ttttt1iiiiiiiiiiiiiiiiiiiiiiiiii.           
           :111tttt1iiiiiiiiiiiiiiiiiiiiiiiiiiii,           
          .;11ttt1iiiiiiiiiiiiiiiiiiiiiiiiiiiiii:.          
          ,11tt1iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii;.          
          :1t1iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii,          
         .;1iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii:.         
         .:;iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii;:.         
           ..:;iiiiiiiiiiiiiiiiiiiiiiiiiiiiii;:,.           
               .,:;iiiiiiiiiiiiiiiiiiiiii;:,.               
                  ..:;;iiiiiiiiiiiiii;;:..                  
                      .,:;iiiiiiii;:,.                      
                          .,:;;:,.   


               ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.               

.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.                                         


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:        




@@8Cfi,.           t:              .:C@@
@G,.              t@8,              .,0@
@f..             ,8@@C               .f@
@1,.             1@88@i              .i@
@i,              C@008G              .:8
@i,.            .00LtC0,             .:8
@i,.             LC11fC,             .;8
@t,,             :1;;11              .f@
@C,,              .i1,              .,G@
@@;.          .1fLG00CCL1,          .;8@
@@G:,,..      f8888888888G.     ..,,;G@@
@@@8800GCf11i1GGG000000000LfLLCGG008@@@@




@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@    22222@@@@@    22222@@@@@    22222
2222      22222222      22222222      2222
2@@        @@@2@@        @@@2@@        @@@
2@          @@2@          @@2@          @@
2@          @@2@          @@2@          @@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@    22222@@@@@    22222@@@@@    22222
2222      22222222      22222222      2222
2@@        @@@2@@        @@@2@@        @@@
2@          @@2@          @@2@          @@
2@          @@2@          @@2@          @@


are tips
@@@@@@@@@@@@@@
@@@@@    22222
2222      2222
@@@        @@@
@@          @@
@@          @@

                .:;.                                        
                :11i,                                       
                i111i,                                      
               .i1111i,                                     
               :111111i:    ,;;,                            
               ;1111111i:  ,i11i,          ..               
              .i11111111i;:111111,      .,:;;               
              ,1111111111111111111:   .,:;ii;.              
              ;111111111ttttt111111:.,:;iiiii:              
             .i11111111ttttttt11111i;;iiiiiii;              
             ,11111111ttttttttt11iiiiiiiiiiiii.             
            .;1111111tttttttttt1iiiiiiiiiiiiii,             
            .i111111ttttttttt1iiiiiiiiiiiiiiii;.            
            ,111111tttttttt1iiiiiiiiiiiiiiiiiii.            
           .:11111ttttttt1iiiiiiiiiiiiiiiiiiiii,            
           .i1111tttttt1iiiiiiiiiiiiiiiiiiiiiii:.           
           ,1111ttttt1iiiiiiiiiiiiiiiiiiiiiiiiii.           
           :111tttt1iiiiiiiiiiiiiiiiiiiiiiiiiiii,           
          .;11ttt1iiiiiiiiiiiiiiiiiiiiiiiiiiiiii:.          
          ,11tt1iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii;.          
          :1t1iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii,          
         .;1iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii:.         
         .:;iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii;:.         
           ..:;iiiiiiiiiiiiiiiiiiiiiiiiiiiiii;:,.           
               .,:;iiiiiiiiiiiiiiiiiiiiii;:,.               
                  ..:;;iiiiiiiiiiiiii;;:..                  
                      .,:;iiiiiiii;:,.                      
                          .,:;;:,.   


Firebase 



               ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.     
                     '
                
 create web applications by implementing and deploying a chat client using Firebase products and services.
 
    Sync data using Cloud Firestore and Cloud Storage for Firebase.
    Authenticate your users using Firebase Authentication.
    Deploy your web app on Firebase Hosting.
    Send notifications with Firebase Cloud Messaging.
    Collect your web app's performance data.
                

    git clone https://github.com/firebase/friendlychat-web
    in the friendlychat web there are 2 applications web, the completed work and web start 


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.        


to create a firebase project 
sign into firebase 
in the console  -> Add Project  -> name:friendlychat 
and write down project ID 

project ID : friendlychat-a8cc9

app will use 


    Firebase Authentication to easily allow your users to sign into your app.
    Cloud Firestore to save structured data on the cloud and get instant notification when data changes.
    Cloud Storage for Firebase to save files in the cloud.
    Firebase Hosting to host and serve your assets.
    Firebase Cloud Messaging to send push notifications and display browser popup notifications.
    Firebase Performance Monitoring to collect user performance data for your app.




.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.        

to make a web app 

click </> icon 
nickname: Friendly Chat 
Register app
click through remaining steps 


use these scitps at the bottom of your body tag 
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="/__/firebase/7.8.0/firebase-ap.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="/__/firebase/7.8.0/firebase-analytics.js"></script>

<!-- Initialize Firebase -->
<script src="/__/firebase/init.js"></script>

npm install -g firebase-tools

to deploy 
firebase login
firebase init
firebase deploy




  
  .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  


to enable google sign in 
develop section -> Authentication -> sign-in method -> google sign in 
public-facing : Friendly Chat
support email: acct email 
now check out the oauth consent  screen 


,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  


Enable Cloud Firestore

console -> develop -> database  -> create db  -> start in test mode 
choose a location close to u 


,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  


Enable Cloud Storage 

console -> develop -> storage -> get started 
storage is where your databaase is 




               ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.     
                     '

Install the CLI 

npm install -s firebase tools  /
npx firebase --version 7.12.1 


to authorize the firebase cli 
firebase login

needa do it on the device you have access to 


Associate your app with your Firebase project 
firebase use --add
select project id and provide alias for your app give it default
 
 ,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  

run starter app locally 
npx firebase serve --only hosting

make sure you have the firebase  sdk 
<!-- Import and configure the Firebase SDK -->
<!-- These scripts are made available when the app is served or deployed on Firebase Hosting -->
<!-- If you do not want to serve/host your project using Firebase Hosting see https://firebase.google.com/docs/web/setup -->
<script src="/__/firebase/7.8.0/firebase-app.js"></script>
<script src="/__/firebase/7.8.0/firebase-auth.js"></script>
<script src="/__/firebase/7.8.0/firebase-storage.js"></script>
<script src="/__/firebase/7.8.0/firebase-messaging.js"></script>
<script src="/__/firebase/7.8.0/firebase-firestore.js"></script>
<script src="/__/firebase/7.8.0/firebase-performance.js"></script>
<script src="/__/firebase/init.js"></script>

the scripts should be there in ./public/

@@@@@@@@@@@@@@
@@@@@    22222  init.js contains the scripts in your firebase configuration 
2222      2222
@@@        @@@
@@          @@
@@          @@



@@@@@@@@@@@@@@
@@@@@    22222    Alternatively, instead of using the locally available implicit configuration that's generated by Firebase Hosting,
 2222      2222   you can instead provide the initialization snippet from your Project Settings (in the Your apps card, select your web app, then select the Config option).
2222      2222    You should use this method especially when you're using your own hosting server rather than Firebase Hosting.
@@@        @@@
@@          @@
@@          @@



               ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.    


sign in process 
you need these fn in main.js 
function signIn() {
  // Sign into Firebase using popup auth & Google as the identity provider.
  var provider = new firebase.auth.GoogleAuthProvider();
  firebase.auth().signInWithPopup(provider);
}

// Signs-out of Friendly Chat.
function signOut() {
  // Sign out of Firebase.
  firebase.auth().signOut();
}

// Initiate Firebase Auth.
function initFirebaseAuth() {
  // Listen to auth state changes.
  firebase.auth().onAuthStateChanged(authStateObserver);
}

function getProfilePicUrl() {
  return firebase.auth().currentUser.photoURL || '/images/profile_placeholder.png';
}

// Returns the signed-in user's display name.
function getUserName() {
  return firebase.auth().currentUser.displayName;
}

// Returns true if a user is signed-in.
function isUserSignedIn() {
  return !!firebase.auth().currentUser;
}

you need these functions to setup sign in

               ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.    

 Write messages to Cloud Firestore
 
    Go back to the file public/scripts/main.js.
    Find the function saveMessage.
    Replace the entire function with the following code.
    refresh the browser


function saveMessage(messageText) {
  // Add a new message entry to the database.
  return firebase.firestore().collection('messages').add({
    name: getUserName(),
    text: messageText,
    profilePicUrl: getProfilePicUrl(),
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  }).catch(function(error) {
    console.error('Error writing new message to database', error);
  });
}


so now when you refresh the page and write a message, you see it in the the database console 


 ,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  

now when reading messages they need to be suncs used the loadMessages in main js to do what needs to be done


 ,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  


for delaing with files use cloud storage for firebase 


    Creates a "placeholder" chat message in the chat feed, so that users see a "Loading" animation while we upload the image.
    Uploads the image file to Cloud Storage to this path: /<uid>/<messageId>/<file_name>
    Generates a publicly readable URL for the image file.
    Updates the chat message with the newly uploaded image file's URL in lieu of the temporary loading image.
    saveImageMessage in public/mains


.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  

Show notifications 

done with Firebase Cloud Messaging (FCM)


Whitelist the GCM Sender ID

done in manifest.json like this 
  "gcm_sender_id": "103953800507"


FCM service worker 
firebase-messaging-sw.js
with this script 

importScripts('/__/firebase/6.0.4/firebase-app.js');
importScripts('/__/firebase/6.0.4/firebase-messaging.js');
importScripts('/__/firebase/init.js');

firebase.messaging();

GET FCM device tokens 
replace code for saveMessagingDeviceToken
in public/main.js


to ask the user to grant permission to show desktop notifications 
firebase.messaging().requestPermission()
replace code for requestNotificationsPermissions()
in public/main.js 


@@@@@@@@@@@@@@
@@@@@    22222
2222      2222
@@@        @@@   at this point firefox starts to deny permission to do things 
@@          @@
@@          @@


your FCM device token :dx7jaq-HZEuXzNjg_95GQ6:APA91bFil64zn2F5jrVcyEGmVnr7ra436fXBCfqGCO1KIv00d1jMX3_-u4lWMHeUnxrDFHJC2hNwJa99keIgA6k6dy2dhsXpV3nvvMsnMkaF3GccCpuVyUsaliWvaIY29RRIZtn1XjY9

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:      

Send a notification to your device 

you need the server key  in 
Firebase Console > Project Settings > Cloud Messaging,
AAAAw__Js2I:APA91bETh_Y-aNLvJRK9ZicvuWjCijmZ2HTDQsGed50a_OHOkQQYEmTQy80cFRM7J00feFrtBtyBNt8HrwExuW_2N1yNMCbMAPUFssv9--j6SpA91mKdnfcycypAmzRbGnOwB2VfBBnC

run this in powershell
curl -H "Content-Type: application/json" \
     -H "Authorization: key= & '$env:FCMCloudMessagingServerKey'"\
     -d '{
           "notification": {
             "title": "New chat message!",
             "body": "There is a new message in FriendlyChat",
             "icon": "/images/profile_placeholder.png",
             "click_action": "http://localhost:5000"
           },
           "to:'$env:FCMDeviceToken'"
         }' \
     https://fcm.googleapis.com/fcm/send


curl --location --request POST 'https://fcm.googleapis.com/fcm/send?Authorization=key=your_server_key&Content-Type=application/json' \
--header 'Authorization: key=your_server_key' \
--header 'Content-Type: application/json' \
--data-raw '{
           "notification": {
             "title": "New chat message!",
             "body": "There is a new message in FriendlyChat",
             "icon": "/images/profile_placeholder.png",
             "click_action": "http://localhost:5000"
           },
           "to": "fcm_Device_token"
}'  

you can use above
the postman request you need to send is in the firebase collection in postman of this computer


.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.


Cloud Firestore security rules

in Database -> Rules
the default means anyone can read or write to the datastore  at a certain time 

were modify that w/ this code
click publish  
and updatte locally
also mkae firestore.rules in the local dir and update  
check the firebase orioerty in firebase.json 
to update
firebase deploy --only firestore
you should see no errors and your terminal converted to project console

service cloud.firestore {
  match /databases/{database}/documents {
    // Messages:
    //   - Anyone can read.
    //   - Authenticated users can add and edit messages.
    //   - Validation: Check name is same as auth token and text length below 300 char or that imageUrl is a URL.
    //   - Deletes are not allowed.
    match /messages/{messageId} {
      allow read;
      allow create, update: if request.auth != null
                    && request.resource.data.name == request.auth.token.name
                    && (request.resource.data.text is string
                      && request.resource.data.text.size() <= 300
                      || request.resource.data.imageUrl is string
                      && request.resource.data.imageUrl.matches('https?://.*'));
      allow delete: if false;
    }
    // FCM Tokens:
    //   - Anyone can write their token.
    //   - Reading list of tokens is not allowed.
    match /fcmTokens/{token} {
      allow read: if false;
      allow write;
    }
  }
}

to unit test it 
firebase emulators:start --only firestore 




.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.

Cloud storage security rules 

so this storage security controls what types of data moves in and out as well as the data itself 
default is this 

service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read, write: if request.auth != null;
    }
  }
}

update rules t o

    Allow each user to write only to their own specific folders
    Allow anyone to read from Cloud Storage
    Make sure that the files uploaded are images
    Restrict the size of the images that can be uploaded to maximum 5 MB

with these rules then may take a minute to update 
update them by making a storage.rules files at web-start root 

in firebase.json add the code below 


and to apply changes 
firebase deploy --only storage


// Returns true if the uploaded file is an image and its size is below the given number of MB.
function isImageBelowMaxSize(maxSizeMB) {
  return request.resource.size < maxSizeMB * 1024 * 1024
      && request.resource.contentType.matches('image/.*');
}

service firebase.storage {
  match /b/{bucket}/o {
    match /{userId}/{messageId}/{fileName} {
      allow write: if request.auth != null && request.auth.uid == userId && isImageBelowMaxSize(5);
      allow read;
    }
  }
}


.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.


Collect performance data 
to enable https://firebase.google.com/docs/perf-mon/get-started-web

to initialize Performance Monitoring. in public/scripts/main

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:     

First input delay - first impression of responsiveness of the app 

to enable 
open public/index.html 
uncomment the script tag 
thats it 
https://firebase.google.com/docs/perf-mon/get-started-web#add-custom-trace
https://firebase.google.com/docs/perf-mon/custom-attributes



@@@@@@@@@@@@@@
@@@@@    22222
2222      2222      performance data usually displays within the last 12 hrs 
@@@        @@@
@@          @@
@@          @@



15 Deploy app using firebase hosting 
has a hosting service to serve assets and web apps this was already done for you at firebase.json under hosting 

to deploy given files to app 
firebase deploy --except functions

now its hosted here 
https://friendlychat-a8cc9.firebaseapp.com
https://friendlychat-a8cc9.web.app

to learn more 
https://codelabs.developers.google.com/codelabs/firestore-web/#0
https://codelabs.developers.google.com/codelabs/firebase-perf-mon-web/


.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.


Cloud functions 
go into friendlychat-web app and go into cloud-functions-start
https://codelabs.developers.google.com/codelabs/firebase-cloud-functions/#5

The Functions Directory
npm install -s 
Firebase SDK for Cloud Functions and the Firebase Admin SDK. 

tney run code in node 6 not node 8 

@@@@@@@@@@@@@@
@@@@@    22222
2222      2222
@@@        @@@ changed to node for beta 
@@          @@
@@          @@

so we weed fn and admin to get things done 

to initalize 
 // Import the Firebase SDK for Google Cloud Functions.
const functions = require('firebase-functions');
// Import and initialize the Firebase Admin SDK.
const admin = require('firebase-admin');
admin.initializeApp();

so in database -> data -> messages we have the fields 
name, profilePicUrl, text and timestamp, with  cloud fn we can do more 


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:   

functions.auth().onCreate which runs the function every time a user signs-in for the first time in your Firebase app.
in index.js

then to use it 
firebase deploy --only functions

see when we deploy fn it takes a long time, because were firing the API  and installing the fn 

// Adds a message that welcomes new users into the chat.
exports.addWelcomeMessages = functions.auth.user().onCreate(async (user) => {
  console.log('A new user signed in for the first time.');
  const fullName = user.displayName || 'Anonymous';

  // Saves the new welcome message into the database
  // which then displays it in the FriendlyChat clients.
  await admin.firestore().collection('messages').add({
    name: 'Firebase Bot',
    profilePicUrl: '/images/firebase-logo.png', // Firebase logo
    text: `${fullName} signed in for the first time! Welcome!`,
    timestamp: admin.firestore.FieldValue.serverTimestamp(),
  });
  console.log('Welcome message written to database.');
});
  

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:   


Sign out delete yourself from the authenticated users and then sign in, the app now notifies that you have signed in for the first time        

.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.

Images moderation

we dont want bad images 


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:   


to detect new image uploads 
functions.storage().onFinalize


    Check if the image is flagged as Adult or Violent using the Cloud Vision API
    If the image has been flagged, download it on the running Functions instance
    Blur the image using ImageMagick
    Upload the blurred image to Cloud Storage

    enable cloud vision api 
    https://console.cloud.google.com/apis/api/vision.googleapis.com/overview?project=friendlychat-a8cc9&supportedpurview=project -> choose project in the dropdown in the menu -> click enable 
    npm install --save @google-cloud/vision@0.12.0 child-process-promise@2.2.1

    then refer to the blur offensive images in the index.js 
    blurOffensiveImages,blurImage


.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,S,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.


New Message Notifications 
you need their FCM device token 
look at sendNotifications in index.js 
then we also need to clean up tokens look at the cleanupTokens file 


@@@@@@@@@@@@@@
@@@@@    22222
2222      2222   3rd party service requires paid plan by google 
@@@        @@@
@@          @@
@@          @@




               ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.   

Installing Firebase into your computer and into your project 

.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  

Installing firebase

to install
npm install -s firebase

they got nvmwindows amazing 

to login 
firebase login 

to see your projects 
firebase projects:list

to update to the latest version 
npm install -s firebase-tools


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  

setting up firebase ci 

npm install -g firebase-tools
firebase login:ci 
visit the url provided sign in with a google acct 
print a new refersh token 
Store the output token in a secure but accessible way in your CI system
use it when running firebase commands 
when your done firebase logout --token token



.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  

initalize a project 
firebase init 
make all rules rules.json 
do not allow to do any npm install do it yourself with npm install -s 
if angular use typescript 


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  

project alias 
they seem to resemble git branches 
Source control and project aliases

In general, you should check your .firebaserc file into source control to allow your team to share project aliases. 
However, for open source projects or starter templates, you should generally not check in your .firebaserc file.
+---------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Command                               | Description                                                                                                                                                                                                           |
+---------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| firebase use                          | View a list of currently defined aliases for your project directory                                                                                                                                                   |
+---------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| firebase use \project_id_or_alias     | Directs all commands to run against the specified Firebase project. The CLI uses this project as the currently "active project""."                                                                                    |
+---------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| firebase use --clear                  | Directs all commands to run against the Firebase project assigned the default alias. The CLI uses this project as the currently "active project"". Running this command is the same as running firebase use default." |
+---------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| firebase use \--unalias project_alias | Removes an alias from your project directory.                                                                                                                                                                         |
+---------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  


firebase serve 

firebase serve
firebase serve --only functions,hosting // uses a flag

To emulate HTTP functions only, use the following command:
firebase serve --only functions

to test from other local devices 
firebase serve --host 0.0.0.0  // accepts requests to any host


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  


firebase deploy 
need to have a firebase.json file 
deployments rewrite your security rules 


to add a comment 
firebase deploy -m "Deploying the best new feature ever."


+--------------------------+---------------------------------------------------------------------------------+
| Flag syntax              | Service or feature deployed                                                     |
+--------------------------+---------------------------------------------------------------------------------+
| --only hosting           | Firebase Hosting content                                                        |
+--------------------------+---------------------------------------------------------------------------------+
| --only database          | Firebase Realtime Database rules                                                |
+--------------------------+---------------------------------------------------------------------------------+
| --only storage           | Cloud Storage for Firebase rules                                                |
+--------------------------+---------------------------------------------------------------------------------+
| --only firestore         | Cloud Firestore rules and indexes                                               |
+--------------------------+---------------------------------------------------------------------------------+
| --only firestore:rules   | Cloud Firestore rules                                                           |
+--------------------------+---------------------------------------------------------------------------------+
| --only firestore:indexes | Cloud Firestore indexes                                                         |
+--------------------------+---------------------------------------------------------------------------------+
| --only functions         | Cloud Functions for Firebase (more specific versions of this flag are possible) |
+--------------------------+---------------------------------------------------------------------------------+


to deploy specific functions 
firebase deploy --only functions:function1,functions:function2,functions:groupA.function1,groupB.function4

also 
var functions = require('firebase-functions');

exports.groupA = {
  function1: functions.https.onRequest(...),
  function2: functions.database.ref('\path').onWrite(...)
}
exports.groupB = require('./groupB');


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:        

deploy delete 
Deletes all functions that match the specified name in all regions: 
firebase functions:delete function1-name

Deletes a specified function running in a non-default region: 
firebase functions:delete function1-name --region region-name

Deletes more than one function: 
firebase functions:delete function1-name function2-name      

Bypasses the confirmation prompt: 
firebase functions:delete function1-name --force


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:        

setup predeploy postdeploy

add properties to functions object in firebase.json file 

             ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:  

Environment variables

Within scripts running in the predeploy and postdeploy hooks, the following environment variables are available:

    $GCLOUD_PROJECT: The active project's project ID
    $PROJECT_DIR: The root directory containing the firebase.json file
    $RESOURCE_DIR: (For hosting and functions scripts only) The location of the directory that contains the Hosting or Cloud Functions resources to be deployed



.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  

Manage multiple Realtime Database instances

a project has more than one database
use --instance [instance-name]

    database:get
    database:profile
    database:push
    database:remove
    database:set
    database:update


CLI admin commands  

+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| Command  | Description                                                                                                                                               |                                                                               |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| help     | Displays help information about the CLI or specific commands.                                                                                             |                                                                               |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| init     | Associates and sets up a new Firebase project in the current directory. This command creates a firebase.json configuration file in the current directory. |                                                                               |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| list     | "Deprecated. Instead use projects:list. Lists all the Firebase projects to which you have access." 
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| login    | Authenticates the CLI to your Firebase account. Requires access to a web browser.                                                                         |                                                                               |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| login-ci | Generates an authentication token for use in non-interactive environments.                                                                                |                                                                               |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| logout   | Signs out the CLI from your Firebase account.                                                                                                             |                                                                               |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| open     | Opens a browser to relevant project resources.                                                                                                            |                                                                               |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| list     | Lists all the Firebase projects to which you have access.                                                                                                 |                                                                               |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| use      | "Sets the active Firebase project for the CLI. Manages project aliases."                                                                                  |                                                                               |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+



Project management commands
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+
| Command                                                          | Description                                                                 |                                                              |
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+
| apps:create                                                      | Creates a new Firebase App in the active project.                           |                                                              |
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+
| apps:list                                                        | Lists the registered Firebase Apps in the active project.                   |                                                              |
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+
| apps:sdkconfig                                                   | Prints the Google services configuration of a Firebase App.                 |                                                              |
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+
| projects:addfirebase                                             | Adds Firebase resources to an existing Google Cloud Platform (GCP) project. |                                                              |
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+
| projects:create                                                  | "Creates a new Google Cloud Platform (GCP) project                          | then adds Firebase resources to the new project."            |
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+
| projects:list                                                    | Lists all the Firebase projects to which you have access.                   |                                                              |
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+
| setup:web                                                        | "Deprecated. Instead                                                        | use apps:sdkconfig and specify web as the platform argument. |
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+
| Prints the Google services configuration of a Firebase Web App." |                                                                             |                                                              |
+------------------------------------------------------------------+-----------------------------------------------------------------------------+--------------------------------------------------------------+



                .:;.                                        
                :11i,                                       
                i111i,                                      
               .i1111i,                                     
               :111111i:    ,;;,                            
               ;1111111i:  ,i11i,          ..               
              .i11111111i;:111111,      .,:;;               
              ,1111111111111111111:   .,:;ii;.              
              ;111111111ttttt111111:.,:;iiiii:              
             .i11111111ttttttt11111i;;iiiiiii;              
             ,11111111ttttttttt11iiiiiiiiiiiii.             
            .;1111111tttttttttt1iiiiiiiiiiiiii,             
            .i111111ttttttttt1iiiiiiiiiiiiiiii;.            
            ,111111tttttttt1iiiiiiiiiiiiiiiiiii.            
           .:11111ttttttt1iiiiiiiiiiiiiiiiiiiii,            
           .i1111tttttt1iiiiiiiiiiiiiiiiiiiiiii:.           
           ,1111ttttt1iiiiiiiiiiiiiiiiiiiiiiiiii.           
           :111tttt1iiiiiiiiiiiiiiiiiiiiiiiiiiii,           
          .;11ttt1iiiiiiiiiiiiiiiiiiiiiiiiiiiiii:.          
          ,11tt1iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii;.          
          :1t1iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii,          
         .;1iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii:.         
         .:;iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii;:.         
           ..:;iiiiiiiiiiiiiiiiiiiiiiiiiiiiii;:,.           
               .,:;iiiiiiiiiiiiiiiiiiiiii;:,.               
                  ..:;;iiiiiiiiiiiiii;;:..                  
                      .,:;iiiiiiii;:,.                      
                          .,:;;:,.   


Firebase python sdk 


              ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.       

SDK setup 


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.                                         

to install 
pip install --user firebase-admin


to get the private key 
In the Firebase console, open Settings > Service Accounts.
Click Generate New Private Key, then confirm by clicking Generate Key.
Securely store the JSON file containing the key.


to get started 
lb = json.loads(os.environ['AF_AUTH'])
cred = credentials.Certificate(lb)
apps = firebase_admin.initialize_app(cred)

to get started w/o params 
firebase_admin.initialize_app()
    it reads the FIREBASE_CONFIG, provide it in JSON 

Initialize several apps 
# Initialize the default app
default_app = firebase_admin.initialize_app(cred)

#  Initialize another app with a different config
other_app = firebase_admin.initialize_app(cred, name='other')

print(default_app.name)    # "[DEFAULT]"
print(other_app.name)      # "other"


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.                                         


What is firebase what is GCP 

GCP is a container for data, code, configuration, and services.
Firebase is just a sub addition plugin
so if a data piece is in Firebase expect it to be the same  in GCP 

Firebase hosting 
Firebase Hosting multisite feature  36 sites per project


project ID
Project name uniquely identifies the app, to get things done have the project ID 


Tools to manage project 
Firebase console 
Firebase CLI
Firebase Rest API 



@@@@@@@@@@@@@@
@@@@@    22222
2222      2222    Adding apps to a project, try to keep it under one app 
@@@        @@@    multi-tenancy different projects, same data location nono 
@@          @@
@@          @@



.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.     

Selecting locations for your project 


Google Analytics 
Cloud Firestore and Storage go in the same place 
Cloud Functions 
Google App Engine 


Default GCP resource location 
if you set it once thts it 


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.     


Configure multiple projects

just grab that initalizer in python and replace w/ all data needed to reference the other project 

for analytics 


            ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.       

Firebase and PWA 


Safe and secure 	

    Firebase Hosting provisions free SSL certificates for your custom domain and default Firebase subdomain.
    Firebase Authentication enables you to sign in users across devices securely.
    FirebaseUI implements best practices for authentication flows.

Fast load time 	

    Firebase Hosting supports HTTP/2 and can cache both your static and dynamic content on a global CDN.
    The Firebase JavaScript SDK is modular, and you can dynamically import libraries when they're needed.

Network resilience 	

    With Cloud Firestore, you can store and access data in real time and offline.
    Firebase Authentication maintains a user's authentication state, even offline.

Engage users 	

    Firebase Cloud Messaging enables you to send push messages to your users' devices.
    With Cloud Functions for Firebase, you can automate re-engagement messages based on cloud events.



.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.                                         

file: firebaseui_sign-in.png 
https://firebase.google.com/docs/hosting/quickstart

to get the firebase UI 

npm install firebase --save
npm install firebaseui --save

var firebase = require('firebase');
var firebaseui = require('firebaseui');
// or using ES6 imports:E
import * as firebaseui from 'firebaseui'


Firebase hosting uses HTTP/2 to optimize  "time to first meaningful paint" and "time to interactive", 

dynamic loading 
https://github.com/firebase/friendlypix-web/blob/master/src/Router.js#L39-L47

Users who dont have dependable internet access 
use offline data persistence, also be aware of cached sign-in data 

Engage users by sending push notifications 

.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.                                         

use bigquery to answer your own analytics questions 
for free plans use big-query sandbox

there Firebase and GCP IAM - for granular user access control


            ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.     

Firebase Emulator Suite 

help you test stuff 

            ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.    

Firebase extensions 

code that runs when a specifc event happens in your app 
they are in beta decide wht to do

extensions have an extensions.yaml 


    The Google services (APIs) that the extension will use
    The access roles that the extension requires to operate
    The extension-specific resources that the extension requires to operate
    The configurable parameters for the extension

    Prompts you to provide the required configuration values (parameters) for the extension.
    Enables the listed APIs from the extension.yaml file.
    Creates a new service account, and assigns it the listed access roles. The extension executes its code using the access granted to this service account.
    Provisions the listed resources for the extension (for example, a function).















              ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.       

https://firebase.google.com/docs/reference/admin/python/firebase_admin.auth#classes

Firebase_admin.auth                      


class firebase_admin.auth.ImportUserRecord(uid, email=None, email_verified=None,
 display_name=None, phone_number=None, photo_url=None, disabled=None, 
 user_metadata=None, provider_data=None, custom_claims=None, password_hash=None, password_salt=None)

 	

    uid  Users unique ID. Must be a non-empty string not longer than 128 characters.
    email  Users email address (optional).
    email_verified  A boolean indicating whether the users email has been verified (optional).
    display_name  Users display name (optional).
    phone_number  Users phone number (optional).
    photo_url  Users photo URL (optional).
    disabled  A boolean indicating whether this user account has been disabled (optional).
    user_metadata  An auth.UserMetadata instance with additional user metadata (optional).
    provider_data  A list of auth.UserProvider instances (optional).
    custom_claims  A dict of custom claims to be set on the user account (optional).
    password_hash  Users password hash as a bytes sequence (optional).
    password_salt  Users password salt as a bytes sequence (optional).


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.   

the extension has a couple of resources, it needs to function if you uninistall it some functions stay 

use the firebase console to get things done 


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.   

Installing Extensions 

1. View Detailed Info 
2. Installed choose config options and be aware of billing 
3. budget alerts and view config details 



.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.   

Manage installed extensions 

to view logs 
Dashboard -> Functions -> Logs 

grant permission to extension w/ serrice acct with permissions and roles 


              ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.  

Firebase authentication 
allows users into an app 

Firebase User object
name email, ID, and photo URL 
anything else stored somewhere else 

we have a current user when sigining out the instance is still functional and updates to it updates the user state 

to understand the user lifecycle use listeners 


Tokens 
Firebase ID tokens, Identity provider tokens,Firebase custom tokens


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.   

Managing Users 

to get a user
user = auth.get_user_by_email(email)

by phone 
user = auth.get_user_by_phone_number(phone)
however were having a hard time w/ this 

@@@@@@@@@@@@@@
@@@@@    22222
2222      2222
@@@        @@@  if you have to get the user by email, try all emails associated w/ the acct 
@@          @@
@@          @@

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:     

To create a user 

user = auth.create_user(
    email='user@example.com',
    email_verified=False,
    phone_number='+15555550100',
    password='secretPassword',
    display_name='John Doe',
    photo_url='http://www.example.com/12345678/photo.png',
    disabled=False)
print('Sucessfully created new user: {0}'.format(user.uid))

    Fireb creates its own uid, if you want to give your own just provide the uid keyword argument 

Property,Type,Description
uid          ,string,             "The uid to assign to the newly created user. Must be a string between 1 and 128 characters long, inclusive.
                                     If not provided, a random uid will be automatically generated."
email          ,string,             The user's primary email. Must be a valid email address.
emailVerified          ,boolean,             "Whether or not the user's primary email is verified. If not provided, the default is false."
phoneNumber          ,string,             The user's primary phone number. Must be a valid E.164 spec compliant phone number.
password          ,string,             "The user's raw, unhashed password. Must be at least six characters long."
displayName          ,string,             The users' display name.
photoURL          ,string,             The user's photo URL.
disabled          ,boolean,             "Whether or not the user is disabled. true for disabled; false for enabled. If not provided, the default is false."


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:     

to update a user 

user = auth.update_user(
    uid,
    email='user@example.com',
    phone_number='+15555550100',
    email_verified=True,
    password='newPassword',
    display_name='John Doe',
    photo_url='http://www.example.com/12345678/photo.png',
    disabled=True)
print('Sucessfully updated user: {0}'.format(user.uid))
you need the uid to update the user 



               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:      

List all users 

# Start listing users from the beginning, 1000 at a time.
page = auth.list_users()
while page:
    for user in page.users:
        print('User: ' + user.uid)
    # Get next batch of users.
    page = page.get_next_page()

# Iterate through all users. This will still retrieve users in batches,
# buffering no more than 1000 users in memory at a time.
for user in auth.list_users().iterate_all():
    print('User: ' + user.uid)


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:     

password salts and hashes 


firebase_admin sdk doesnt have this by default 
firebaseauth.configs.getHashConfig
can do this by creating custom IAM role


To create the custom IAM role:
    Go to the Roles page in IAM & admin panel in the GCP Console.
    Select your project from the drop-down at the top of the page.
    Click CREATE ROLE
    Click ADD PERMISSIONS
    Search for firebaseauth.configs.getHashConfig permission and select that checkbox.
    Click ADD
    Click CREATE to finish creating the new role.

Add the created custom role to the user/service account in the IAM page:

    In the IAM & admin panel, select IAM
    Select the service or user account from the list of members for editing.
    Click ADD ANOTHER ROLE.
    Search for the new custom role previously created.
    Click SAVE.

@@@@@@@@@@@@@@
@@@@@    22222
2222      2222
@@@        @@@ Dont use the editor role to get this done 
@@          @@
@@          @@


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.   

Importing users 

 auth.importUsers() 
 used to import in bulk 

 quick operation make sure there are no duplicates in your import data or unexpected results 

 users = [
    auth.ImportUserRecord(
        uid='uid1',
        email='user1@example.com',
        password_hash=b'password_hash_1',
        password_salt=b'salt1'
    ),
    auth.ImportUserRecord(
        uid='uid2',
        email='user2@example.com',
        password_hash=b'password_hash_2',
        password_salt=b'salt2'
    ),
]

auth.import_users(users)


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:     
to import users with passwords you need hashing support 

# import users w/ password 
hash_alg = auth.UserImportHash.hmac_sha256(key=b'secret_key')
try:
    result = auth.import_users(users, hash_alg=hash_alg)
    print('Successfully imported {0} users. Failed to import {1} users.'.format(
        result.success_count, result.failure_count))
    for err in result.errors:
        print('Failed to import {0} due to {1}'.format(users[err.index].uid, err.reason))
except exceptions.FirebaseError:
    # Some unrecoverable error occurred that prevented the operation from running.
    pass


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:  

      to import w/ HMAC hashed passwords 

      support HMAC_MD5, HMAC_SHA1, HMAC_SHA256 and HMAC_SHA512.

users = [
    auth.ImportUserRecord(
        uid='some-uid',
        email='user@example.com',
        password_hash=b'password_hash',
        password_salt=b'salt'
    ),
]

then use the same algorithm as default 


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 


MD5, SHA and PBKDF
hashing algorithms include: MD5, SHA1, SHA256, SHA512, PBKDF_SHA1 and PBKDF2_SHA256.
for these you need to provide the ## of rounds




hash_alg = auth.UserImportHash.pbkdf2_sha256(rounds=100000)
try:
    result = auth.import_users(users, hash_alg=hash_alg)
    for err in result.errors:
        print('Failed to import user:', err.reason)
except exceptions.FirebaseError as error:
    print('Error importing users:', error)


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 


doesnt work figure out why
Import users with standard SCRYPT hashed passwords

you need 

    memoryCost: the CPU/memory cost of the hashing algorithm.
    parallelization: the parallelization of the hashing algorithm.
    blockSize: the block size (normally 8) of the hashing algorithm.
    derivedKeyLength: The derived key length of the hashing algorithm

users = [
    auth.ImportUserRecord(
        uid='some-uid',
        email='user@example.com',
        password_hash=b'password_hash',
        password_salt=b'salt'
    ),
]

hash_alg = auth.UserImportHash.standard_scrypt(
    memory_cost=1024, parallelization=16, block_size=8, derived_key_length=64)
try:
    result = auth.import_users(users, hash_alg=hash_alg)
    for err in result.errors:
        print('Failed to import user:', err.reason)
except exceptions.FirebaseError as error:
    print('Error importing users:', error)


@@@@@@@@@@@@@@
@@@@@    22222
2222      2222
@@@        @@@ w/ firebase I got an invalid hash parameter, if you remove execptions you get more detailed explanation
@@          @@
@@          @@



               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

BCRYPT

users = [
    auth.ImportUserRecord(
        uid='some-uid',
        email='user6@example.com',
        password_hash=b'password_hash',
        password_salt=b'salt'
    ),
]

hash_alg = auth.UserImportHash.bcrypt()
try:
    result = auth.import_users(users, hash_alg=hash_alg)
    for err in result.errors:
        print('Failed to import user:', err.reason)
except exceptions.FirebaseError as error:
    print('Error importing users:', error)



               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

Firebase SCRYPT
useful from migrating users from another Firebase project 

idk how enable it someone help me 

             ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

to do import combo and extra stuff

users = [
    auth.ImportUserRecord(
        uid='some-uid',
        display_name='John Doe',
        email='johndoe@gmail.com',
        photo_url='http://www.example.com/12345678/photo.png',
        email_verified=True,
        phone_number='+11234567890',
        custom_claims={'admin': True}, # set this user as admin
        provider_data=[ # user with Google provider
            auth.UserProvider(
                uid='google-uid',
                email='johndoe@gmail.com',
                display_name='John Doe',
                photo_url='http://www.example.com/12345678/photo.png',
                provider_id='google.com'
            )
        ],
    ),
]
try:
    result = auth.import_users(users)
    for err in result.errors:
        print('Failed to import user:', err.reason)
except exceptions.FirebaseError as error:
    print('Error importing users:', error)


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,. 

Create Custom Tokens

get yr JWT here 

to do this need a 3rd party server that accepts sign in credentials, and returns a custom JWT 
frontend uses JWT to verify w/ firebase
Furthermore, the contents of the JWT will be available in the auth object in your Firebase Realtime Database Security Rules  and 
request.auth object in your Cloud Storage Security Rules.

can do this w/ firebase admin sdk or 3rd party 


             ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

using the service acct ID 


looks like this 
<client-id>@<project-id>.iam.gserviceaccount.com


get it here 
https://console.cloud.google.com/iam-admin/serviceaccounts?project=backendfire&folder=&organizationId=&supportedpurview=project

and make it an env var thnks


              ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

Create custom tokens using the Firebase Admin SDK


to create a custom token 

uid = 'some-uid'
additional_claims = {
    'premiumAccount': True
} #OPTIONAL

custom_token = auth.create_custom_token(uid)

@@@@@@@@@@@@@@
@@@@@    22222
2222      2222
@@@        @@@
@@          @@
@@          @@


Firebase tokens comply with the OpenID Connect JWT spec, which means the following claims are reserved and cannot be specified within the additional claims:
acr
amr
at_hash
aud 	auth_time
azp
cnf
c_hash 	exp
firebase
iat
iss 	jti
nbf
nonce
sub

              ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

send that token to your front end and use it to login 
refer to pyrebase for login in 
it modifies storage and database like this

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 


service firebase.storage {
  match /b/<your-firebase-storage-bucket>/o {
    match /adminContent/{filename} {
      allow read, write: if request.auth.uid == "some-uid";
    }
  }
}

service firebase.storage {
  match /b/<your-firebase-storage-bucket>/o {
    match /premiumContent/{filename} {
      allow read, write: if request.auth.token.premiumAccount == true;
    }
  }
}


@@@@@@@@@@@@@@
@@@@@    22222
2222      2222
@@@        @@@ Troubleshooting guidance is on this page as well, but even though we log in w/ pyrebase the rules dont get updated 
@@          @@
@@          @@



.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,. 

To verify Tokens

your admin SDK needs the project ID 
auth token and JWT are different  so 

decoded_token = auth.verify_id_token(user['idToken'])
uid = decoded_token['uid']
print(decoded_token)

user is from logging in w/ token

if SDK had projectId  in fn call tht the one 
if SDK was given service acct credentials thts the one
if you have GOOGLE_CLOUD_PROJECT set , thts the one 


if were good u get the user back, if were not you get an error 




.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,. 

Managing User Sessions 

Firebase tokens are short lived last for an hour

expires when 
user is deleted 
user is disabled 
password email or big acct change happens 

you can revoke sessions or granually disable session manipulations 


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 


to revoke refresh tokens 
you can also use  auth.list_users()
to get all users if your application been hacked 


auth.revoke_refresh_tokens(uid)
user = auth.get_user(uid)

user = auth.update_user(
    uid,
    email='2@gmail.com'
    )
user = auth.update_user(
    uid,
    email=original_email 
    )        
    

revocation_second = user.tokens_valid_after_timestamp / 1000
print('Tokens revoked at: {0}'.format(revocation_second))


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

Detect revocation 
its an expensive for the admin SDK to do it 

metadata_ref = firebase_admin.db.reference("metadata/" + uid)
metadata_ref.set({'revokeTime': revocation_second})

add this to database rules 
{
  "rules": {
    "metadata": {
      "$user_id": {
        // this could be false as it is only accessed from backend or rules.
        ".read": "$user_id === auth.uid",
        ".write": "false",
      }
    },
    "users": {
        "$user_id": {
          ".read": "($user_id === auth.uid ) && (auth.token.auth_time > root.child('metadata').child(auth.uid).child('revokeTime').val()) ",
          ".write": "($user_id === auth.uid) && (auth.token.auth_time > root.child('metadata').child(auth.uid).child('revokeTime').val()) "
        }
    }
 
}



               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

      Advanced Security: Enforce IP address restrictions

      check IP addr, suspicious origin , sudden geolocation change 
      
      

      .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
      .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
      ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
      ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
      .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
      .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
      ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
      .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
      ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
      ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
      ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
      .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
      ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.
      
      Manage Session Cookies
      make sure you prevent CSRF here


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

      to create session Cookies
      also check the auth time of the inbound token 

      # Get the ID token sent by the client
      id_token = flask.request.json['idToken']
      # Set session expiration to 5 days.
      expires_in = datetime.timedelta(days=5)
      try:
          # Create the session cookie. This will also verify the ID token in the process.
          # The session cookie will have the same claims as the ID token.
          session_cookie = auth.create_session_cookie(id_token, expires_in=expires_in)
          response = flask.jsonify({'status': 'success'})
          # Set cookie policy for session cookie.
          expires = datetime.datetime.now() + expires_in
          response.set_cookie(
              'session', session_cookie, expires=expires, httponly=True, secure=True)
          return response
      except exceptions.FirebaseError:
          return flask.abort(401, 'Failed to create a session cookie')
  

          ..                           
          ,t:    :1:    :.          
       .:  :t;. :ti,    i,          
       ;;   1t:,t;;. .,1t.          
       ;1.  i1;ti:;::11i,  .        
     .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
  ;1  ,:        :,       i, .t.         
  .f . :;        ,;       ::  ,t         
  i1::;;i:::i;:::;1;:;i;;:i1:::f: 

TO   verify session cookie and check permissions 
admin needs that SDK  in order to work

decoded_claims = auth.verify_session_cookie(session_cookie, check_revoked=True)


          ..                           
          ,t:    :1:    :.          
       .:  :t;. :ti,    i,          
       ;;   1t:,t;;. .,1t.          
       ;1.  i1;ti:;::11i,  .        
     .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
  ;1  ,:        :,       i, .t.         
  .f . :;        ,;       ::  ,t         
  i1::;;i:::i;:::;1;:;i;;:i1:::f: 

  to revoke session 

  decoded_claims = auth.verify_session_cookie(session_cookie,check_revoked=True)
  auth.revoke_refresh_tokens(decoded_claims['sub'])
    user = auth.update_user(
        uid,
        email='2@gmail.com'
    )
    user = auth.update_user(
        uid,
        email=original_email 
    )    
    decoded_claims = auth.verify_session_cookie(session_cookie,check_revoked=True) 







    

            







               ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.               


Pyrebase
https://firebase.google.com/docs/database/rest/start

since we dont have a python client SDK and we dont want to give this to angular we got pyrebase 

refer to play_pyre.py 


           ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

#to login 



user = auth.sign_in_with_email_and_password('user@example.com', 'newPassword')
print(user)


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

to login with token 

uid = 'some-uid'
additional_claims = {
    'premiumAccount': True
} #OPTIONAL

custom_token = auth.create_custom_token(uid)
print(custom_token.decode("utf-8") ) 
user = pyre_auth.sign_in_with_custom_token(custom_token.decode("utf-8") )
print(user)


      .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
      .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
      ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
      ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
      .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
      .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
      ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
      .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
      ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
      ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
      ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
      .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
      ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.


      Control Access with Custom Claims and Security Rules
      like ubnutu chown permmssion at a granular level 
      access control is known as claim

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 
      
      To create a custom user claim

      # Set admin privilege on the user corresponding to uid.
      auth.set_custom_user_claims(uid, {'admin': True})
      # The new custom claims will propagate to the user's ID token the
      # next time a new one is issued.


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 
      
      
      to see it in action

      # Verify the ID token first.
      claims = auth.verify_id_token(id_token)
      if claims['admin'] is True:
          # Allow access to requested admin resource.
          pass

     # Lookup the user associated with the specified uid.
          user = auth.get_user(uid)
          # The claims can be accessed on the user record.
          print(user.custom_claims.get('admin'))
                    
          @@@@@@@@@@@@@@
          @@@@@    22222
          2222      2222
          @@@        @@@  In order for the access control claim to apply you need 
          @@          @@  re-login  the user 
          @@          @@            

          @@@@@@@@@@@@@@
          @@@@@    22222
          2222      2222
          @@@        @@@  Custom claims are are for  access control only, dont store anything else in there
          @@          @@  
          @@          @@            

                          
    .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
    .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
    ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
    ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
    .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
    .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
    ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
    .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
    ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
    ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
    ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
    .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
    ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.
    
    Generating Email Action Links          

    Firebase and google has its own system, if you have your own email system this is what u do

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 
      
    to generate password reset email link 
    Generate email verification link 
    Generate email link for sign-in 

      @@@@@@@@@@@@@@
      @@@@@    22222
      2222      2222
      @@@        @@@  you need to whitelist everything
      @@          @@  
      @@          @@            

      action_code_settings = auth.ActionCodeSettings(
        url='https://www.example.com/checkout?cartId=1234',
        handle_code_in_app=True,
        ios_bundle_id='com.example.ios',
        android_package_name='com.example.android',
        android_install_app=True,
        android_minimum_version='12',
        dynamic_link_domain='coolapp.page.link',
      )

    
      email = 'user@example.com'
      link = auth.generate_password_reset_link(email, action_code_settings)
      link = auth.generate_email_verification_link(email, action_code_settings)
      link = auth.generate_sign_in_with_email_link(email, action_code_settings)



      you whitelist by dymanic links 

      in your DNS provider 

      TXT type 
      sortforyou.com -host 
      google-site-verification=eIcGZu0pdqK1usuTdtEhDtxuU4jK0Nsby9qDw_59Zck       -value

        it take hour to refresh

    go to console > grow > dynamics > get started



               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 
      
      for sending actual email its probable a seperate GCP cloud extension or  firebase api but thts blaze api, i guess smtp server is very hackable 
      https://www.hostinger.com/tutorials/how-to-use-free-google-smtp-server
      https://developers.google.com/gmail/api/guides?hl=en_US
      https://developers.google.com/gmail/api/guides/sending?hl=en_US

      Gmail API 


      ..                       
      .:     :.                 
      :i     ,;..  ..           
      ,t:    :1:    :.          
   .:  :t;. :ti,    i,          
   ;;   1t:,t;;. .,1t.          
   ;1.  i1;ti:;::11i,  .        
 .  t1,.11;i1i;it1:   .1.       
 .: ,tt11ti;i1;;1:  , ;t.       
 :,  it1it1;1ti;;ii,t :,        
 , : .i;i;;;1tti;:1t1.          
. .1.,i1;::itt1i;,it1i .        
: :t1;tt1;::;;;:,,ittt.:        
i :ttiit1i:..,,..:1tt1 i.       
:i.1t1;;;:.     ,1tt1.:;        
 ,::1ft1;;:,.,:;i1itt1fi;.      
.,;1tLCLLttLift1fLLt11fLtfi,      
,iitfCf;;1itC,LL1t11LCLfti:.       
,;;;;; .i;;if Lfii1,.iLGLiii.      
..   ,iiii, ii;;;i,  :;;;,       
     ..,.  ,;;iii,              
             .,,.  
             
Firebase database 

Instead of typical HTTP requests, Firebase Realtime Database uses 
data synchronization everything related to the data gets updated realtime 
offline, it persists data to the disk
can be accessed from client devices

so storage is for big photos documents, media and email 
use remote config to activate themes for your app 
firebase hosting host your static webpages, 

with the admin SDK you can get very granular with data and prviliges


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  


to authenticate admin privileges 

import firebase_admin
from firebase_admin import credentials
from firebase_admin import db

// # Fetch the service account key JSON file contents
cred = credentials.Certificate('path/to/serviceAccountKey.json')

// # Initialize the app with a service account, granting admin privileges
firebase_admin.initialize_app(cred, {
    'databaseURL': 'https://databaseName.firebaseio.com'
})

// # As an admin, the app has access to read and write all data, but there is a way 
ref = db.reference('restricted_access/secret_document')
print(ref.get())

#if the mapping doesnt exist you get none 


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

      Authenticate with limited privileges
      {
        "rules": {
          "public_resource": {
            ".read": true,
            ".write": true
          },
          "some_resource": {
            ".read": "auth.uid === 'my-service-worker'",
            ".write": false
          },
          "another_resource": {
            ".read": "auth.uid === 'my-service-worker'",
            ".write": "auth.uid === 'my-service-worker'"
          }
        }
      }

      
    firebase_admin.initialize_app(cred, {
        'databaseURL': 'https://databaseName.firebaseio.com',
        'databaseAuthVariableOverride': {
            'uid': 'my-service-worker'
        }
    })

    so now if you do ths
    ref = db.reference('/restricted_resource')
    you get exceptions.UnauthenticatedError // which should be unauthorization error 



    .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
    .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
    ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
    ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
    .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
    .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
    ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
    .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
    ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
    ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
    ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
    .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
    ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.
    
    Structure Your Database

    gotta think about it 
    JSON data structure 
    
    avoid nesting data 
    flatten data structure 
    Make it scabable, if you data has to grow dont get stuck  research 
    

    .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
    .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
    ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
    ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
    .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
    .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
    ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
    .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
    ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
    ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
    ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
    .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
    ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.
    
    Saving Data 

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 
      
     
      set 	        Write or replace data to a defined path, like messages/users/<username>
      update 	    Update some of the keys for a defined path without replacing all of the data
      push 	        Add to a list of data in the database. Every time you push a new node onto a list, 
                    your database generates a unique key, like messages/users/<unique-user-id>/<username>
      transaction 	Use transactions when working with complex data that could be corrupted by concurrent updates    


      @@8Cfi,.           t:              .:C@@
      @G,.              t@8,              .,0@
      @f..             ,8@@C               .f@
      @1,.             1@88@i              .i@
      @i,              C@008G              .:8
      @i,.            .00LtC0,             .:8
      @i,.             LC11fC,             .;8
      @t,,             :1;;11              .f@
      @C,,              .i1,              .,G@
      @@;.          .1fLG00CCL1,          .;8@
      @@G:,,..      f8888888888G.     ..,,;G@@
      @@@8800GCf11i1GGG000000000LfLLCGG008@@@@

      

    set overwrites the whole property  so if you make a child propr with ref.child if you use set on the parent child is gone everything is gone

      users_ref = ref.child('users')
      users_ref.set({
          'alanisawesome': {
              'date_of_birth': 'June 23, 1912',
              'full_name': 'Alan Turing'
          },
          'gracehop': {
              'date_of_birth': 'December 9, 1906',
              'full_name': 'Grace Hopper'
          }
      })


      @@8Cfi,.           t:              .:C@@
      @G,.              t@8,              .,0@
      @f..             ,8@@C               .f@
      @1,.             1@88@i              .i@
      @i,              C@008G              .:8
      @i,.            .00LtC0,             .:8
      @i,.             LC11fC,             .;8
      @t,,             :1;;11              .f@
      @C,,              .i1,              .,G@
      @@;.          .1fLG00CCL1,          .;8@
      @@G:,,..      f8888888888G.     ..,,;G@@
      @@@8800GCf11i1GGG000000000LfLLCGG008@@@@


      to append to a prop / update 

      hopper_ref = users_ref.child('gracehop')
      hopper_ref.update({
          'nickname': 'Amazing Grace'
          'gracehop/nickanme':'its me pal'
      })
            
        however if you write like this  you ovverite it 
        hopper_ref.update({
            'gracehop': {
                'value':'replace that object'
            }
        })      

      
        @@8Cfi,.           t:              .:C@@
        @G,.              t@8,              .,0@
        @f..             ,8@@C               .f@
        @1,.             1@88@i              .i@
        @i,              C@008G              .:8
        @i,.            .00LtC0,             .:8
        @i,.             LC11fC,             .;8
        @t,,             :1;;11              .f@
        @C,,              .i1,              .,G@
        @@;.          .1fLG00CCL1,          .;8@
        @@G:,,..      f8888888888G.     ..,,;G@@
        @@@8800GCf11i1GGG000000000LfLLCGG008@@@@
  
        to generate unique keys while saving data 

        posts_ref = ref.child('posts')

        new_post_ref = posts_ref.push()
        posts_ref.push({
            'author': 'gracehop',
            'title': 'Announcing COBOL, a New Programming Language'
        })
        
        new_post_ref.set({
            'author': 'gracehop',
            'title': 'Announcing COBOL, a New Programming Language'
        })
        
        # We can also chain the two calls together
        posts_ref.push().update({
            'author': 'alanisawesome',
            'title': 'The Turing Machine'
        })
        
        # Generate a reference to a new location and add some data using push()
        new_post_ref = posts_ref.push()
        
        # Get the unique key generated by push()
        post_id = new_post_ref.key        


            


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f: 

      so we need to maintain state in an applications, when updates are going down and the application depends on data 
      we use transaction so when one application update that data, the same application gets the updated 'SOURCE OF TRUTH ' not their own local data and from the
      functionality between the two, so if the data bas must be 'SOURCE OF TRUTH ' you must retrieve the data first 

        
      Transaction
      
      
      def increment_votes(current_value):
      return current_value + 1 if current_value else 1
  
        upvotes_ref = db.reference('server/saving-data/fireblog/posts/-JRHTHaIs-jNPLXOQivY/upvotes')
        try:
            new_vote_count = upvotes_ref.transaction(increment_votes)
            print('Transaction completed')
        except db.TransactionAbortedError:
            print('Transaction failed to commit')

            ..                           
            ,t:    :1:    :.          
         .:  :t;. :ti,    i,          
         ;;   1t:,t;;. .,1t.          
         ;1.  i1;ti:;::11i,  .        
       .  t1,.11;i1i;it1:   .1.    
      ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
    ;1  ,:        :,       i, .t.         
    .f . :;        ,;       ::  ,t         
    i1::;;i:::i;:::;1;:;i;;:i1:::f: 

    networking updating

    node and java but all SDK should do this no?


    
    .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
    .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
    ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
    ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
    .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
    .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
    ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
    .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
    ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
    ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
    ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
    .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
    ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.
    
    Retrieving data 
    
    ref = db.reference('server/saving-data/fireblog/posts')

    # Read the data at the posts reference (this is a blocking operation)
    print(ref.get())
            

                ..                           
            ,t:    :1:    :.          
         .:  :t;. :ti,    i,          
         ;;   1t:,t;;. .,1t.          
         ;1.  i1;ti:;::11i,  .        
       .  t1,.11;i1i;it1:   .1.    
      ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
    ;1  ,:        :,       i, .t.         
    .f . :;        ,;       ::  ,t         
    i1::;;i:::i;:::;1;:;i;;:i1:::f: 

    Querying data 

      
    @@8Cfi,.           t:              .:C@@
    @G,.              t@8,              .,0@
    @f..             ,8@@C               .f@
    @1,.             1@88@i              .i@
    @i,              C@008G              .:8
    @i,.            .00LtC0,             .:8
    @i,.             LC11fC,             .;8
    @t,,             :1;;11              .f@
    @C,,              .i1,              .,G@
    @@;.          .1fLG00CCL1,          .;8@
    @@G:,,..      f8888888888G.     ..,,;G@@
    @@@8800GCf11i1GGG000000000LfLLCGG008@@@@
  
        to order by child property 

        ref = db.reference('dinosaurs')
        snapshot = ref.order_by_child('height').get()
        for key, val in snapshot.items():
            print('{0} was {1} meters tall'.format(key, val))

        some pattern you get js primitive, other pattern you get js object    
        
      
        @@8Cfi,.           t:              .:C@@
        @G,.              t@8,              .,0@
        @f..             ,8@@C               .f@
        @1,.             1@88@i              .i@
        @i,              C@008G              .:8
        @i,.            .00LtC0,             .:8
        @i,.             LC11fC,             .;8
        @t,,             :1;;11              .f@
        @C,,              .i1,              .,G@
        @@;.          .1fLG00CCL1,          .;8@
        @@G:,,..      f8888888888G.     ..,,;G@@
        @@@8800GCf11i1GGG000000000LfLLCGG008@@@@
        
        to order by key 

        snapshot = ref.order_by_key().get()
        print(snapshot)


        
      
        @@8Cfi,.           t:              .:C@@
        @G,.              t@8,              .,0@
        @f..             ,8@@C               .f@
        @1,.             1@88@i              .i@
        @i,              C@008G              .:8
        @i,.            .00LtC0,             .:8
        @i,.             LC11fC,             .;8
        @t,,             :1;;11              .f@
        @C,,              .i1,              .,G@
        @@;.          .1fLG00CCL1,          .;8@
        @@G:,,..      f8888888888G.     ..,,;G@@
        @@@8800GCf11i1GGG000000000LfLLCGG008@@@@
        
        to order by value 


        ref = db.reference('scores')
        snapshot = ref.order_by_value().get()
        for key, val in snapshot.items():
            print('The {0} dinosaur\'s score is {1}'.format(key, val))
                        
        for objects like this 

        {
        "scores": {
            "bruhathkayosaurus" : 55,
            "lambeosaurus" : 21,
            "linhenykus" : 80,
            "pterodactyl" : 93,
            "stegosaurus" : 5,
            "triceratops" : 22
            }
        }


                ..                           
            ,t:    :1:    :.          
         .:  :t;. :ti,    i,          
         ;;   1t:,t;;. .,1t.          
         ;1.  i1;ti:;::11i,  .        
       .  t1,.11;i1i;it1:   .1.    
      ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
    ;1  ,:        :,       i, .t.         
    .f . :;        ,;       ::  ,t         
    i1::;;i:::i;:::;1;:;i;;:i1:::f: 

    Complex query 

    to order and begin from end 

    snapshot = ref.order_by_child('weight').limit_to_last(2).get()
    for key in snapshot:
        print(key)
    

    to order and begin from beginning 
    
    snapshot = ref.order_by_child('weight').limit_to_first(2).get()
    for key in snapshot:
        print(key)    
    
    to start at

    snapshot = ref.order_by_child('height').start_at(3).get()
    for key in snapshot:
        print(key)
    

    to end at 

    snapshot = ref.order_by_key().end_at('pterodactyl').get()
    for key in snapshot:
        print(key)
    
    
    only the ones that are equal to 

    snapshot = ref.order_by_child('height').equal_to(25).get()
    for key in snapshot:
        print(key)
    
        ..                           
        ,t:    :1:    :.          
     .:  :t;. :ti,    i,          
     ;;   1t:,t;;. .,1t.          
     ;1.  i1;ti:;::11i,  .        
   .  t1,.11;i1i;it1:   .1.    
  ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
;1  ,:        :,       i, .t.         
.f . :;        ,;       ::  ,t         
i1::;;i:::i;:::;1;:;i;;:i1:::f:         

        How Data is Ordered

        This section explains how your data is ordered when using each of the four ordering functions.
        orderByChild
        
        When using orderByChild(), data that contains the specified child key is ordered as follows:
        
            Children with a null value for the specified child key come first.
            Children with a value of false for the specified child key come next. If multiple children have a value of false, they are sorted lexicographically by key.
            Children with a value of true for the specified child key come next. If multiple children have a value of true, they are sorted lexicographically by key.
            Children with a numeric value come next, sorted in ascending order. If multiple children have the same numerical value for the specified child node, they are sorted by key.
            Strings come after numbers, and are sorted lexicographically in ascending order. If multiple children have the same value for the specified child node, they are ordered lexicographically by key.
            Objects come last, and sorted lexicographically by key in ascending order.
        
        orderByKey
        
        When using orderByKey() to sort your data, data is returned in ascending order by key as follows. Keep in mind that keys can only be strings.
        
            Children with a key that can be parsed as a 32-bit integer come first, sorted in ascending order.
            Children with a string value as their key come next, sorted lexicographically in ascending order.
        
        orderByValue
        
        When using orderByValue(), children are ordered by their value. The ordering criteria is the same as in orderByChild(), except the value of the node is used instead of the value of a specified child key.       
        
        
    
        .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
        .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
        ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
        ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
        .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
        .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
        ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
        .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
        ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
        ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
        ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
        .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
        ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.

        Database security rules 

    
            ..                           
            ,t:    :1:    :.          
        .:  :t;. :ti,    i,          
        ;;   1t:,t;;. .,1t.          
        ;1.  i1;ti:;::11i,  .        
    .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
     ;1  ,:        :,       i, .t.         
    .f . :;        ,;       ::  ,t         
    i1::;;i:::i;:::;1;:;i;;:i1:::f:   

    .read 	    Describes if and when data is allowed to be read by users.
    .write 	    Describes if and when data is allowed to be written.
    .validate 	Defines what a correctly formatted value will look like, whether it has child attributes, and the data type.
    .indexOn 	Specifies a child to index to support ordering and querying.


    to allow anyone to read but not to write 

    {
        "rules": {
          "foo": {
            ".read": true,
            ".write": false
          }
        }
    }
    
    
    built in rules 
    $uid = id of users obtained by firebase auth
    /users/<uid>/

    {
        "rules": {
          "users": {
            "$uid": {
              ".write": "$uid === auth.uid"
            }
          }
        }
    }

    to enforce how data comes into yr paths

    {
        "rules": {
          "foo": {
            ".validate": "newData.isString() && newData.val().length < 100"
          }
        }
      }

    
      if you need to use order_by  you need to support the .indexOn property 

      



          
      .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
      .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
      ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
      ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
      .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
      .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
      ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
      .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
      ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
      ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
      ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
      .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
      ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.

      Secure Data
    
            ..                           
            ,t:    :1:    :.          
        .:  :t;. :ti,    i,          
        ;;   1t:,t;;. .,1t.          
        ;1.  i1;ti:;::11i,  .        
    .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
     ;1  ,:        :,       i, .t.         
    .f . :;        ,;       ::  ,t         
    i1::;;i:::i;:::;1;:;i;;:i1:::f:


    Structure your data 

    rules for child properties  and
    new messages must have a string content and a number timestamp

    {
        "rules": {
          "messages": {
            "$message": {
              // only messages from the last ten minutes can be read
              ".read": "data.child('timestamp').val() > (now - 600000)",
      
              // new messages must have a string content and a number timestamp
              ".validate": "newData.hasChildren(['content', 'timestamp']) && newData.child('content').isString() && newData.child('timestamp').isNumber()"
            }
          }
        }
    }

            ..                           
            ,t:    :1:    :.          
        .:  :t;. :ti,    i,          
        ;;   1t:,t;;. .,1t.          
        ;1.  i1;ti:;::11i,  .        
    .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
     ;1  ,:        :,       i, .t.         
    .f . :;        ,;       ::  ,t         
    i1::;;i:::i;:::;1;:;i;;:i1:::f:


    Structure your data     


+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| now         | The current time in milliseconds since Linux epoch. This works particularly well for validating timestamps created with the SDK's firebase.database.ServerValue.TIMESTAMP. |
+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| root        | A RuleDataSnapshot representing the root path in the Firebase database as it exists before the attempted operation.                                                        |
+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| newData     | A RuleDataSnapshot representing the data as it would exist after the attempted operation. It includes the new data being written and existing data.                        |
+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| data        | A RuleDataSnapshot representing the data as it existed before the attempted operation.                                                                                     |
+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| $ variables | A wildcard path used to represent ids and dynamic child keys.                                                                                                              |
+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| auth        | Represents an authenticated user's token payload.                                                                                                                          |
+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

      
They can be used anywhere in the rules 


            ..                           
            ,t:    :1:    :.          
        .:  :t;. :ti,    i,          
        ;;   1t:,t;;. .,1t.          
        ;1.  i1;ti:;::11i,  .        
    .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
     ;1  ,:        :,       i, .t.         
    .f . :;        ,;       ::  ,t         
    i1::;;i:::i;:::;1;:;i;;:i1:::f:


    this rule would allow us to create new 
    records or delete existing ones, but not to make changes to existing non-null data:
    ".write": "!data.exists() || !newData.exists()"


    @@@@@@@@@@@@@@
    @@@@@    22222
    2222      2222
    @@@        @@@  Make sure to check for null or invalid data 
    @@          @@
    @@          @@
    

            ..                           
            ,t:    :1:    :.          
        .:  :t;. :ti,    i,          
        ;;   1t:,t;;. .,1t.          
        ;1.  i1;ti:;::11i,  .        
    .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
     ;1  ,:        :,       i, .t.         
    .f . :;        ,;       ::  ,t         
    i1::;;i:::i;:::;1;:;i;;:i1:::f:
    
    referencing data in other paths 

    ".write": "root.child('allow_writes').val() === true &&
        !data.parent().child('readOnly').exists() &&
        newData.child('foo').exists()"


        ..                           
        ,t:    :1:    :.          
    .:  :t;. :ti,    i,          
    ;;   1t:,t;;. .,1t.          
    ;1.  i1;ti:;::11i,  .        
.  t1,.11;i1i;it1:   .1.    
;ti;i;;;:i;;:1;;;ii:;;i:1t,          
 ;1  ,:        :,       i, .t.         
.f . :;        ,;       ::  ,t         
i1::;;i:::i;:::;1;:;i;;:i1:::f:

Read and Write Rules Cascade

shallow rules overwrite deeper rules 

{
    "rules": {
       "foo": {
          // allows read to /foo/*
          ".read": "data.child('baz').val() === true",
          "bar": {
            /* ignored, since read was allowed already */
            ".read": false
          }
       }
    }
  }
  

atomic rules 

{
    "rules": {
      "records": {
        "rec1": {
          ".read": true
        },
        "rec2": {
          ".read": false
        }
      }
    }
  }

  
  yr good for records/rec1 and records/rec 2 but not records 
  you need a shallower rule or yyou get error 



        ..                           
        ,t:    :1:    :.          
    .:  :t;. :ti,    i,          
    ;;   1t:,t;;. .,1t.          
    ;1.  i1;ti:;::11i,  .        
.  t1,.11;i1i;it1:   .1.    
;ti;i;;;:i;;:1;;;ii:;;i:1t,          
 ;1  ,:        :,       i, .t.         
.f . :;        ,;       ::  ,t         
i1::;;i:::i;:::;1;:;i;;:i1:::f:

Query based rules 

you can limit access with the query

"baskets": {
    ".read": "auth.uid != null &&
              query.orderByChild == 'owner' &&
              query.equalTo == auth.uid" // restrict basket access to owner of basket
  }

the query var represents the database methods and the query wants to see those database
the the args passed to the db methods matching the conditionals in the rules or else it will
reject the query 


        ..                           
        ,t:    :1:    :.          
    .:  :t;. :ti,    i,          
    ;;   1t:,t;;. .,1t.          
    ;1.  i1;ti:;::11i,  .        
.  t1,.11;i1i;it1:   .1.    
;ti;i;;;:i;;:1;;;ii:;;i:1t,          
 ;1  ,:        :,       i, .t.         
.f . :;        ,;       ::  ,t         
i1::;;i:::i;:::;1;:;i;;:i1:::f:

Validate Data 

only allows dates in the format YYYY-MM-DD between the years 1900-2099, which is checked using a regular expression.
".validate": "newData.isString() &&
              newData.val().matches(/^(19|20)[0-9][0-9][-\\/. ](0[1-9]|1[012])[-\\/. ](0[1-9]|[12][0-9]|3[01])$/)"


@@@@@@@@@@@@@@
@@@@@    22222
2222      2222
@@@        @@@   .validate does not cascade and works only on non null vales, so when you have a root read/write rule use child validate rules
@@          @@
@@          @@



        ..                           
        ,t:    :1:    :.          
    .:  :t;. :ti,    i,          
    ;;   1t:,t;;. .,1t.          
    ;1.  i1;ti:;::11i,  .        
.  t1,.11;i1i;it1:   .1.    
;ti;i;;;:i;;:1;;;ii:;;i:1t,          
 ;1  ,:        :,       i, .t.         
.f . :;        ,;       ::  ,t         
i1::;;i:::i;:::;1;:;i;;:i1:::f:

Using $ Variables to Capture Path Segments

if you want have too many paths with 

/block/#req_param 

you can capture them like this 

{
    "rules": {
      "rooms": {
        // this rule applies to any child of /rooms/, the key for each room id
        // is stored inside $room_id variable for reference
        "$room_id": {
          "topic": {
            // the room's topic can be changed if the room id has "public" in it
            ".write": "$room_id.contains('public')"
          }
        }
      }
    }
}

{
    "rules": {
      "widget": {
        // a widget can have a title or color attribute
        "title": { ".validate": true },
        "color": { ".validate": true },
  
        // but no other child paths are allowed
        // in this case, $other means any key excluding "title" and "color"
        "$other": { ".validate": false }
      }
    }
}


        ..                           
        ,t:    :1:    :.          
    .:  :t;. :ti,    i,          
    ;;   1t:,t;;. .,1t.          
    ;1.  i1;ti:;::11i,  .        
.  t1,.11;i1i;it1:   .1.    
;ti;i;;;:i;;:1;;;ii:;;i:1t,          
 ;1  ,:        :,       i, .t.         
.f . :;        ,;       ::  ,t         
i1::;;i:::i;:::;1;:;i;;:i1:::f:

User Based Security

everything is done w/ the auth variable 

auth 

provider 	The authentication method used ("password", "anonymous", "facebook", "github", "google", or "twitter").
uid 	A unique user id, guaranteed to be unique across all providers.
token 	The contents of the Firebase Auth ID token. See the reference documentation for auth.token for more details. 

ex 

{
    "rules": {
      "users": {
        "$user_id": {
          // grants write access to the owner of this user account
          // whose uid must exactly match the key ($user_id)
          ".write": "$user_id === auth.uid"
        }
      }
    }
  }

  

store all users in one place 

this rul says only user can see their own data 

{
    "rules": {
      "users": {
        "$uid": {
          ".read": "auth != null && auth.uid == $uid"
        }
      }
    }
  }

  
  @@8Cfi,.           t:              .:C@@
  @G,.              t@8,              .,0@
  @f..             ,8@@C               .f@
  @1,.             1@88@i              .i@
  @i,              C@008G              .:8
  @i,.            .00LtC0,             .:8
  @i,.             LC11fC,             .;8
  @t,,             :1;;11              .f@
  @C,,              .i1,              .,G@
  @@;.          .1fLG00CCL1,          .;8@
  @@G:,,..      f8888888888G.     ..,,;G@@
  @@@8800GCf11i1GGG000000000LfLLCGG008@@@@

  authentication custom claims 

  {
    "rules": {
      "frood": {
        // A towel is about the most massively useful thing an interstellar
        // hitchhiker can have
        ".read": "auth.token.hasEmergencyTowel === true"
      }
    }
  }
    
        ..                           
        ,t:    :1:    :.          
    .:  :t;. :ti,    i,          
    ;;   1t:,t;;. .,1t.          
    ;1.  i1;ti:;::11i,  .        
.  t1,.11;i1i;it1:   .1.    
;ti;i;;;:i;;:1;;;ii:;;i:1t,          
 ;1  ,:        :,       i, .t.         
.f . :;        ,;       ::  ,t         
i1::;;i:::i;:::;1;:;i;;:i1:::f:

Resolve Insecurties 

Open access
Access for any authenticated user
ignoring the read/write cascade rule 
closed off 


               ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.               

    Realtime Database Billing 



    .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
    .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
    ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
    ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
    .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
    .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
    ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
    .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
    ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
    ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
    ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
    .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
    ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.    

  
  

              ..                       
              .:     :.                 
              :i     ,;..  ..           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.       
         .: ,tt11ti;i1;;1:  , ;t.       
         :,  it1it1;1ti;;ii,t :,        
         , : .i;i;;;1tti;:1t1.          
        . .1.,i1;::itt1i;,it1i .        
        : :t1;tt1;::;;;:,,ittt.:        
        i :ttiit1i:..,,..:1tt1 i.       
        :i.1t1;;;:.     ,1tt1.:;        
         ,::1ft1;;:,.,:;i1itt1fi;.      
      .,;1tLCLLttLift1fLLt11fLtfi,      
     ,iitfCf;;1itC,LL1t11LCLfti:.       
     ,;;;;; .i;;if Lfii1,.iLGLiii.      
       ..   ,iiii, ii;;;i,  :;;;,       
             ..,.  ,;;iii,              
                     .,,.               


    Cloud Storage

    media images vids email
    they are efficient regardless of network quality
    storage security
    exabyte scabable

    

    to use a default bucket

    import firebase_admin
    from firebase_admin import credentials
    from firebase_admin import storage
    
    cred = credentials.Certificate('path/to/serviceAccountKey.json')
    firebase_admin.initialize_app(cred, {
        'storageBucket': '<BUCKET_NAME>.appspot.com'
    })
    
    bucket = storage.bucket()
    
    # 'bucket' is an object defined in the google-cloud-storage Python library.
    # See https://googlecloudplatform.github.io/google-cloud-python/latest/storage/buckets.html
    # for more details.


.,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
.,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
.,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
.,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
.....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
.,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.  

to use your bucket other than the one given 
bucket = storage.bucket('my-custom-bucket')

to use another bucket from another app
bucket = storage.bucket(app=custom_app)

https://cloud.google.com/storage/docs/reference/libraries


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:        

     bucket metadata 

     print("ID: {}".format(bucket.id))
     print("Name: {}".format(bucket.name))
     print("Storage Class: {}".format(bucket.storage_class))
     print("Location: {}".format(bucket.location))
     print("Location Type: {}".format(bucket.location_type))
     print("Cors: {}".format(bucket.cors))
     print(
         "Default Event Based Hold: {}".format(bucket.default_event_based_hold)
     )
     print("Default KMS Key Name: {}".format(bucket.default_kms_key_name))
     print("Metageneration: {}".format(bucket.metageneration))
     print(
         "Retention Effective Time: {}".format(
             bucket.retention_policy_effective_time
         )
     )
     print("Retention Period: {}".format(bucket.retention_period))
     print("Retention Policy Locked: {}".format(bucket.retention_policy_locked))
     print("Requester Pays: {}".format(bucket.requester_pays))
     print("Self Link: {}".format(bucket.self_link))
     print("Time Created: {}".format(bucket.time_created))
     print("Versioning Enabled: {}".format(bucket.versioning_enabled))
     print("Labels:")
     pprint.pprint(bucket.labels)
 

     .,,,.,,...,,,,.,,.;:.1;.,,,,,,,,.,...,,,
     .,.,,.,,...,,,,i,.;;:1i,...,,,..,,..,,..
     ....,,,....,,.:1,;1:;1i,.,,.,,..,,,..,..
     ..,,..,...,.:.:1;1;:,1ii,:;.,....,...,,.
     .,,,,.,,.,;,;i;iiii:;::;iii;i:.,..,,.,,,
     .,.,...,,.1it1i;t;:;:;:;;;;i;..,,,.,.,,.
     ,....,,...,;1i;;;i:i:i:;;:;1:,,,.,,,.,..
     .....,.,tftCCfiti;tt;i1tiifCLLLf.....,..
     ,,.,,.,iGGCCLLfLffLfLfLfttLCCLfLL1.,,,,,
     ....,.1GLtfffff1tCLtL0CftfCCCGGLLi.,.,,.
     ..,.,.:LCLGGCftfCGLCLLC0CCCGCLf;..,...,.
     .,..,,.,,,fGGGGfCCCCCLCLGCLf;,..,,,,.,,.
     ..,,..,...,it1:.;LCCCL1,;:....,,,,...,,.       

     uploading objects


     from google.cloud import storage


def upload_blob(bucket_name, source_file_name, destination_blob_name):
    """Uploads a file to the bucket."""
    # bucket_name = "your-bucket-name"
    # source_file_name = "local/path/to/file"
    # destination_blob_name = "storage-object-name"

    storage_client = storage.Client()
    bucket = storage_client.bucket(bucket_name)
    blob = bucket.blob(destination_blob_name)

    blob.upload_from_filename(source_file_name)

    print(
        "File {} uploaded to {}.".format(
            source_file_name, destination_blob_name
        )
    )


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:    

      To list your objects

      def list_blobs(bucket_name):
      """Lists all the blobs in the bucket."""
      # bucket_name = "your-bucket-name"
  
      storage_client = storage.Client()
  
      # Note: Client.list_blobs requires at least package version 1.17.0.
      blobs = storage_client.list_blobs(bucket_name)
  
      for blob in blobs:
          print(blob.name)

          storage_client.list_blobs(
            bucket_name, prefix=prefix, delimiter=delimiter
        )
    
    prefix is to give everything under the path 
    delimiter  = '/' makes everything chose only that path idk if its only
     or everything up to  that path 
  

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:    

      To download objects 

from google.cloud import storage


def download_blob(bucket_name, source_blob_name, destination_file_name):
    """Downloads a blob from the bucket."""
    # bucket_name = "your-bucket-name"
    # source_blob_name = "storage-object-name"
    # destination_file_name = "local/path/to/file"

    storage_client = storage.Client()

    bucket = storage_client.bucket(bucket_name)
    blob = bucket.blob(source_blob_name)
    blob.download_to_filename(destination_file_name)

    print(
        "Blob {} downloaded to {}.".format(
            source_blob_name, destination_file_name
        )
    )


               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:    

      To rename objects 
      
      from google.cloud import storage


      def rename_blob(bucket_name, blob_name, new_name):
          """Renames a blob."""
          # bucket_name = "your-bucket-name"
          # blob_name = "your-object-name"
          # new_name = "new-object-name"
      
          storage_client = storage.Client()
          bucket = storage_client.bucket(bucket_name)
          blob = bucket.blob(blob_name)
      
          new_blob = bucket.rename_blob(blob, new_name)
      
          print("Blob {} has been renamed to {}".format(blob.name, new_blob.name))
      
            

               ..                           
              ,t:    :1:    :.          
           .:  :t;. :ti,    i,          
           ;;   1t:,t;;. .,1t.          
           ;1.  i1;ti:;::11i,  .        
         .  t1,.11;i1i;it1:   .1.    
        ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
      ;1  ,:        :,       i, .t.         
      .f . :;        ,;       ::  ,t         
      i1::;;i:::i;:::;1;:;i;;:i1:::f:    

      To copy objects 
      can also send to different bucket 
      
      from google.cloud import storage


      def copy_blob(
          bucket_name, blob_name, destination_bucket_name, destination_blob_name
      ):
          """Copies a blob from one bucket to another with a new name."""
          # bucket_name = "your-bucket-name"
          # blob_name = "your-object-name"
          # destination_bucket_name = "destination-bucket-name"
          # destination_blob_name = "destination-object-name"
      
          storage_client = storage.Client()
      
          source_bucket = storage_client.bucket(bucket_name)
          source_blob = source_bucket.blob(blob_name)
          destination_bucket = storage_client.bucket(destination_bucket_name)
      
          blob_copy = source_bucket.copy_blob(
              source_blob, destination_bucket, destination_blob_name
          )
      
          print(
              "Blob {} in bucket {} copied to blob {} in bucket {}.".format(
                  source_blob.name,
                  source_bucket.name,
                  blob_copy.name,
                  destination_bucket.name,
              )
          )
      

          ..                           
          ,t:    :1:    :.          
       .:  :t;. :ti,    i,          
       ;;   1t:,t;;. .,1t.          
       ;1.  i1;ti:;::11i,  .        
     .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
  ;1  ,:        :,       i, .t.         
  .f . :;        ,;       ::  ,t         
  i1::;;i:::i;:::;1;:;i;;:i1:::f:    

  To move objects
  try to do a copy and delete

            ..                           
          ,t:    :1:    :.          
       .:  :t;. :ti,    i,          
       ;;   1t:,t;;. .,1t.          
       ;1.  i1;ti:;::11i,  .        
     .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
  ;1  ,:        :,       i, .t.         
  .f . :;        ,;       ::  ,t         
  i1::;;i:::i;:::;1;:;i;;:i1:::f:    

  bucket metadata 

  storage_client = storage.Client()
  bucket = storage_client.bucket(bucket_name)
  blob = bucket.get_blob(blob_name)

  to edit look in  docs


  v          ,t:    :1:    :.          
       .:  :t;. :ti,    i,          
       ;;   1t:,t;;. .,1t.          
       ;1.  i1;ti:;::11i,  .        
     .  t1,.11;i1i;it1:   .1.    
    ;ti;i;;;:i;;:1;;;ii:;;i:1t,          
  ;1  ,:        :,       i, .t.         
  .f . :;        ,;       ::  ,t         
  i1::;;i:::i;:::;1;:;i;;:i1:::f:    

  deleting data
  check stroage class if not standard you get charged a fee 

  def delete_blob(bucket_name, blob_name):
  """Deletes a blob from the bucket."""
  # bucket_name = "your-bucket-name"
  # blob_name = "your-object-name"

  storage_client = storage.Client()

  bucket = storage_client.bucket(bucket_name)
  blob = bucket.blob(blob_name)
  blob.delete()

  print("Blob {} deleted.".format(blob_name))


  refer to python documentation to get things done 









  
      



      









